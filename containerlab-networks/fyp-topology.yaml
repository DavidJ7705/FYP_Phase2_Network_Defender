name: fyp-defense-network

topology:
  nodes:
    # Admin Zone (10.0.110.0/24)
    admin-ws:
      kind: linux
      image: alpine:latest
      exec:
        - ip addr add 10.0.110.10/24 dev eth1

    # Operational Zone (10.0.198.0/24)
    web-server:
      kind: linux
      image: nginx:alpine
      exec:
        - ip addr add 10.0.110.1/24 dev eth1
        - ip addr add 10.0.198.1/24 dev eth2
        - ip addr add 10.0.178.1/24 dev eth3

    database:
      kind: linux
      image: postgres:alpine
      env:
        POSTGRES_PASSWORD: postgres
      exec:
        - ip addr add 10.0.198.10/24 dev eth1

    # Public Zone (10.0.178.0/24)
    public-web:
      kind: linux
      image: fyp-public-web:latest
      exec:
        - ip addr add 10.0.178.10/24 dev eth1
        - ip addr add 10.0.200.1/24 dev eth2

    # Attacker (for testing later)
    attacker:
      kind: linux
      image: fyp-attacker:latest
      exec:
        - ip addr add 10.0.200.10/24 dev eth1

  links:
    - endpoints: ["admin-ws:eth1", "web-server:eth1"]
    - endpoints: ["web-server:eth2", "database:eth1"]
    - endpoints: ["web-server:eth3", "public-web:eth1"]
    - endpoints: ["public-web:eth2", "attacker:eth1"]
